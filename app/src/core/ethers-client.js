const a3_0x59e503=a3_0x4426;function a3_0x582b(){const _0x1d84a3=['WOFdNYvPhSknwmoK','rrODBhnAWQKzW4tdVq','mSoMWOLzuGNdKCk1','WOdcHSkqxSogW4RdQG','W4BdRCkfuSkBW6O','zbBcKsJcNvuSrCknW5Ti','vWxcMmk0n2FdHGpcJmocCmkXkeDJAau2WQi','oqf1W77cMuJcUmoaW6hdNhK+BW','q8kVW4BdVuW','W4KkWOddIMhdG0uHWONdTNC','FCkQWQ3cNN/cNNKbWOm4aCkW','W44eWPRdMa','WPJdSSoGW5zSW54','pKj1c2i','W7ldUmoOv2LgA8kgb1ZcJ8ommq','fv3dGhZdN1aGuSklWRn5WR4MWR5l','W5FdO8kBu8kFW6RcIeffW6lcHG','BmoyCmoXW6/dImkk','cSkHW6pcO0ZcJWpcIvmvA2GwW6i0dK8ZgCopFX/cMmoqW4WaW59va8oaWRtcINZcUaP/WRr7W4VdOqKFW4KVla','eKrwoW','FSoIW6fMW5HpEg8m','WQdcRSkQcG','imk7W7flWPVdPeZcRa','WOhdNNOxFSovxSohWOCev1K','WQOBb8k9WOesW5hcR8obWPXXW6tcSIhdJW','uCksww1jla','smkpW7ZdOa','W69jWOWU','W7TCt1JdVCoatG','WQ1zDG3dQq','WP3dRW0','pCkXW5jyWOG','W7ldLxpcR8kN','wuZdNbCo','WPmYq8ker8kpiCk9a8oZoSoztW','j0tdIxpdJ1a','WR8rW4D8W4DzW7ZdM8ovWRRdNSo/WR8','uWSGW5PDW5OBgmoUW4RcVmkTWQNdQCoriSkHW5hdLSoTu8k0fCkwW4fa','W4JdTSkwW4VcVCkYwSkezCk9','w8o3oa4cWRnZnNVdOmopWPWnmWi','WOlcUftdLSk3hCoaswGY','pmkUW7W','W4xdVSkauW','WPHxW5VcJ2ldShKJWQ7dIa','ybpcJCkUnwG','WR1HWRyO','fmoDWRVcVW0QrCkTCCoIWPG','WQhcRmkBjba','DCoHoWeP','W65xEf7dQSoAu8oi','W5hdVq/cI8osr8o6rgKGALq','WOjnW4BcLZ7cMbTRW5BcSc7cHW','WOBcKmkwWOJdRW','ACozEmoIW7m','W57cPSk+W5XyW6eGW4fg','W7ldMHBdTa','vY7cVmkrfvtdTZG','h8kwo8oTW7xcKa','lSo+W7hdNcVdMKm','DqOWW5XrW4Cp','WQ3cPCopWPhcR8kh','mSkYmCoMW4u','CKyZWR7dLWldP8k+WQVcMt5/','qCkysNO','WOVdTSoGW5TW','W7BdKqpdQmkjWQ9S','WQJcJSkFEZJdNSkwW6bGW7vrW69/W5NcSG','W4ZdKudcH8kqlGq1WP/dNSk7W4BcSCowW5ddL8kTW5ldH1RdPZuQWO8iANTEjG','jSo0W7pdGq','W6H1WOa/smoYWOm'];a3_0x582b=function(){return _0x1d84a3;};return a3_0x582b();}function a3_0x4426(_0x259841,_0x3c769d){const _0x2ee84f=a3_0x582b();return a3_0x4426=function(_0x29e5f9,_0x4d912c){_0x29e5f9=_0x29e5f9-0x131;let _0x582ba2=_0x2ee84f[_0x29e5f9];if(a3_0x4426['XlZsnX']===undefined){var _0x4426ed=function(_0x167bc6){const _0x989d1f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4bf218='',_0x1d528d='',_0x78f144=_0x4bf218+_0x4426ed;for(let _0x13614d=0x0,_0x2dc4c1,_0x43144c,_0x1ebe92=0x0;_0x43144c=_0x167bc6['charAt'](_0x1ebe92++);~_0x43144c&&(_0x2dc4c1=_0x13614d%0x4?_0x2dc4c1*0x40+_0x43144c:_0x43144c,_0x13614d++%0x4)?_0x4bf218+=_0x78f144['charCodeAt'](_0x1ebe92+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x2dc4c1>>(-0x2*_0x13614d&0x6)):_0x13614d:0x0){_0x43144c=_0x989d1f['indexOf'](_0x43144c);}for(let _0x148601=0x0,_0x2f1f24=_0x4bf218['length'];_0x148601<_0x2f1f24;_0x148601++){_0x1d528d+='%'+('00'+_0x4bf218['charCodeAt'](_0x148601)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1d528d);};const _0x2a18e7=function(_0x3b9807,_0x114642){let _0x20e981=[],_0x4a470e=0x0,_0x51e5d4,_0x48e281='';_0x3b9807=_0x4426ed(_0x3b9807);let _0x4744f8;for(_0x4744f8=0x0;_0x4744f8<0x100;_0x4744f8++){_0x20e981[_0x4744f8]=_0x4744f8;}for(_0x4744f8=0x0;_0x4744f8<0x100;_0x4744f8++){_0x4a470e=(_0x4a470e+_0x20e981[_0x4744f8]+_0x114642['charCodeAt'](_0x4744f8%_0x114642['length']))%0x100,_0x51e5d4=_0x20e981[_0x4744f8],_0x20e981[_0x4744f8]=_0x20e981[_0x4a470e],_0x20e981[_0x4a470e]=_0x51e5d4;}_0x4744f8=0x0,_0x4a470e=0x0;for(let _0x4ec2d1=0x0;_0x4ec2d1<_0x3b9807['length'];_0x4ec2d1++){_0x4744f8=(_0x4744f8+0x1)%0x100,_0x4a470e=(_0x4a470e+_0x20e981[_0x4744f8])%0x100,_0x51e5d4=_0x20e981[_0x4744f8],_0x20e981[_0x4744f8]=_0x20e981[_0x4a470e],_0x20e981[_0x4a470e]=_0x51e5d4,_0x48e281+=String['fromCharCode'](_0x3b9807['charCodeAt'](_0x4ec2d1)^_0x20e981[(_0x20e981[_0x4744f8]+_0x20e981[_0x4a470e])%0x100]);}return _0x48e281;};a3_0x4426['QwYpnS']=_0x2a18e7,_0x259841=arguments,a3_0x4426['XlZsnX']=!![];}const _0x160f8f=_0x2ee84f[0x0],_0x2cd9dd=_0x29e5f9+_0x160f8f,_0x31dff9=_0x259841[_0x2cd9dd];if(!_0x31dff9){if(a3_0x4426['WDqyCc']===undefined){const _0x37841b=function(_0x402af9){this['OcXpMW']=_0x402af9,this['uYoOXP']=[0x1,0x0,0x0],this['RYPkJY']=function(){return'newState';},this['xBjmTR']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['FMiUQH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x37841b['prototype']['WApsmO']=function(){const _0x337644=new RegExp(this['xBjmTR']+this['FMiUQH']),_0x542582=_0x337644['test'](this['RYPkJY']['toString']())?--this['uYoOXP'][0x1]:--this['uYoOXP'][0x0];return this['mdtJPu'](_0x542582);},_0x37841b['prototype']['mdtJPu']=function(_0x3c643f){if(!Boolean(~_0x3c643f))return _0x3c643f;return this['dkowYN'](this['OcXpMW']);},_0x37841b['prototype']['dkowYN']=function(_0x521730){for(let _0x3c7b2a=0x0,_0x4abcee=this['uYoOXP']['length'];_0x3c7b2a<_0x4abcee;_0x3c7b2a++){this['uYoOXP']['push'](Math['round'](Math['random']())),_0x4abcee=this['uYoOXP']['length'];}return _0x521730(this['uYoOXP'][0x0]);},new _0x37841b(a3_0x4426)['WApsmO'](),a3_0x4426['WDqyCc']=!![];}_0x582ba2=a3_0x4426['QwYpnS'](_0x582ba2,_0x4d912c),_0x259841[_0x2cd9dd]=_0x582ba2;}else _0x582ba2=_0x31dff9;return _0x582ba2;},a3_0x4426(_0x259841,_0x3c769d);}(function(_0x21ee2e,_0x539dfa){const _0x51a60a=a3_0x4426,_0x5c9225=_0x21ee2e();while(!![]){try{const _0x58617f=parseInt(_0x51a60a(0x133,'l9wn'))/0x1+parseInt(_0x51a60a(0x14e,'w$[)'))/0x2+parseInt(_0x51a60a(0x142,'nxAG'))/0x3*(parseInt(_0x51a60a(0x163,'VrT0'))/0x4)+parseInt(_0x51a60a(0x170,'[a@l'))/0x5+parseInt(_0x51a60a(0x176,'d48r'))/0x6*(parseInt(_0x51a60a(0x14a,'uY!^'))/0x7)+parseInt(_0x51a60a(0x152,'7mrx'))/0x8*(-parseInt(_0x51a60a(0x16c,'ijcm'))/0x9)+parseInt(_0x51a60a(0x140,'1ru7'))/0xa*(-parseInt(_0x51a60a(0x162,'l9wn'))/0xb);if(_0x58617f===_0x539dfa)break;else _0x5c9225['push'](_0x5c9225['shift']());}catch(_0x2d6d4a){_0x5c9225['push'](_0x5c9225['shift']());}}}(a3_0x582b,0x6664a));const a3_0x4d912c=(function(){const _0xa64bd3={'xeZDR':function(_0x175432,_0x21b1e0){return _0x175432!==_0x21b1e0;},'ovYXy':'igPHz'};let _0x2cd65d=!![];return function(_0x4c65ef,_0x4bf73f){const _0x5490a1=_0x2cd65d?function(){const _0x7ab2e8=a3_0x4426;if(_0xa64bd3[_0x7ab2e8(0x13c,'KDRQ')]('igPHz',_0xa64bd3['ovYXy']))throw _0x3b6b54('Invalid\x20account\x20Secret\x20Phrase\x20or\x20Private\x20Key');else{if(_0x4bf73f){if(_0x7ab2e8(0x139,'m%sY')==='BPZdT')return _0x2cc091['toString']()['search'](_0x7ab2e8(0x15a,'7s4N'))[_0x7ab2e8(0x132,'73zd')]()['constructor'](_0x4b0868)[_0x7ab2e8(0x135,'59GJ')]('(((.+)+)+)+$');else{const _0x1de98e=_0x4bf73f['apply'](_0x4c65ef,arguments);return _0x4bf73f=null,_0x1de98e;}}}}:function(){};return _0x2cd65d=![],_0x5490a1;};}()),a3_0x29e5f9=a3_0x4d912c(this,function(){const _0x4ff189=a3_0x4426,_0x4c923c={'NSbfI':'(((.+)+)+)+$'};return a3_0x29e5f9[_0x4ff189(0x14d,'(b5u')]()['search'](_0x4c923c['NSbfI'])['toString']()[_0x4ff189(0x16b,'1fLf')](a3_0x29e5f9)['search'](_0x4ff189(0x14f,'1fLf'));});a3_0x29e5f9();import{privateKey}from'../../accounts/accounts.js';import{Helper}from'../utils/helper.js';import a3_0x5b66ae from'../utils/logger.js';import{ethers}from'ethers';import{RPC}from'./network/rpc.js';import a3_0x22786e from'./core.js';export default class EthersClient{constructor(_0x3ae26a,_0x36dc48){const _0x5b6b30=a3_0x4426;this[_0x5b6b30(0x131,'[a@l')]=_0x36dc48,this['acc']=_0x3ae26a,this[_0x5b6b30(0x164,'zUwk')]=new ethers[(_0x5b6b30(0x143,'nRwN'))](RPC['RPCURL'],RPC['CHAINID']);}async[a3_0x59e503(0x169,'7s4N')](){const _0x17ed34=a3_0x59e503,_0xdf80d4={'cAIuv':'xnGec','CdhhM':function(_0x41d3da,_0x5cf830){return _0x41d3da+_0x5cf830;},'rPryz':function(_0x4098c1,_0x2fae3b){return _0x4098c1==_0x2fae3b;}};try{if('gzdEZ'!==_0xdf80d4[_0x17ed34(0x16a,'uY!^')]){const _0x1312e8=this['acc'],_0x5eebcf=privateKey['indexOf'](this['acc']);await Helper['delay'](Helper[_0x17ed34(0x15e,'Alco')],this['acc'],'Connecting\x20to\x20Account\x20:\x20'+_0xdf80d4['CdhhM'](_0x5eebcf,0x1),this[_0x17ed34(0x15b,'59GJ')]);const _0x4d75ad=Helper['determineType'](_0x1312e8);a3_0x5b66ae['info']('Account\x20Type\x20:\x20'+_0x4d75ad);if(_0x4d75ad=='Secret\x20Phrase')this['wallet']=new ethers[(_0x17ed34(0x158,'nxAG'))][(_0x17ed34(0x144,'w$[)'))](_0x1312e8,this['provider']);else{if(_0xdf80d4['rPryz'](_0x4d75ad,'Private\x20Key'))this['wallet']=new ethers['Wallet'](_0x1312e8[_0x17ed34(0x146,'DoIw')](),this['provider']);else throw Error('Invalid\x20account\x20Secret\x20Phrase\x20or\x20Private\x20Key');}this[_0x17ed34(0x157,'tIvV')]=this['wallet']['address'],await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Wallet\x20connected\x20'+JSON['stringify'](this['wallet']['address']),this[_0x17ed34(0x175,'VrT0')]);}else throw _0x4757a2;}catch(_0x4723ad){throw _0x4723ad;}}async['getBalance'](_0x107301=![]){const _0x191160=a3_0x59e503,_0x3fa37c={'BPJVC':'koMYT'};try{if(!_0x107301){if(_0x3fa37c['BPJVC']!==_0x191160(0x16f,'VrT0'))await Helper[_0x191160(0x14c,'nRwN')](0x1f4,this['acc'],_0x191160(0x141,'tIvV')+this[_0x191160(0x155,'&2a@')][_0x191160(0x156,'ijcm')],this[_0x191160(0x175,'VrT0')]);else throw _0x5b9407;}const _0x1795b6=ethers[_0x191160(0x172,'DoIw')](await this['provider']['getBalance'](this[_0x191160(0x166,'DoIw')]['address']));this[_0x191160(0x165,'7KDV')]={'ETH':_0x1795b6},await Helper[_0x191160(0x151,'OhZ8')](0x1f4,this['acc'],'Balance\x20updated',this['core']);}catch(_0x200971){throw _0x200971;}}async['executeTx'](_0x45e226){const _0x4afd63=a3_0x59e503,_0x131e1c={'Rjlzt':function(_0x25f98b,_0x2d3c0b){return _0x25f98b===_0x2d3c0b;},'NnbGz':'ZAygg'};try{a3_0x5b66ae[_0x4afd63(0x160,'ijcm')]('TX\x20DATA\x20'+JSON['stringify'](Helper['serializeBigInt'](_0x45e226))),await Helper['delay'](0x1f4,this['acc'],_0x4afd63(0x171,'sD*9'),this['core']);const _0x5cff8e=await this[_0x4afd63(0x16e,'7mrx')]['sendTransaction'](_0x45e226);a3_0x5b66ae[_0x4afd63(0x153,'*)m3')]('Tx\x20Executed\x20\x0a'+RPC['EXPLORER']+'tx/'+_0x5cff8e[_0x4afd63(0x149,'gw*G')]),await Helper['delay'](0x1f4,this['acc'],_0x4afd63(0x174,'BseX'),this['core']);const _0xfb818b=await _0x5cff8e['wait']();a3_0x5b66ae['info']('Tx\x20Confirmed\x20and\x20Finalizing:\x20'+JSON['stringify'](_0xfb818b)),await Helper[_0x4afd63(0x15c,'7mrx')](0x1388,this['acc'],'Tx\x20Executed\x20and\x20Confirmed\x20\x0a'+RPC[_0x4afd63(0x154,'9OKg')]+_0x4afd63(0x145,'d48r')+_0xfb818b[_0x4afd63(0x136,'uY!^')],this['core']),await this['getBalance'](!![]);}catch(_0x161adf){if(_0x161adf[_0x4afd63(0x161,'GcsW')]['includes']('504')){if(_0x131e1c['Rjlzt']('VsGml','VsGml'))await Helper[_0x4afd63(0x150,'$[RG')](0x1388,this['acc'],_0x161adf[_0x4afd63(0x15d,'*)m3')],this[_0x4afd63(0x137,'1ru7')]);else throw _0x266ef2;}else{if('SfRVg'===_0x131e1c['NnbGz'])throw _0x56641f;else throw _0x161adf;}}}async['getOptimalNonce'](){const _0xbe7dea=a3_0x59e503,_0x3cd8ec={'ZEfgU':function(_0x3ca265,_0x2ae31c){return _0x3ca265>_0x2ae31c;}};try{if('ooCxm'==='aKNkd'){const _0x13c850=_0x1ebe92?function(){if(_0x4a470e){const _0x4c3560=_0x4ec2d1['apply'](_0x37841b,arguments);return _0x402af9=null,_0x4c3560;}}:function(){};return _0x20e981=![],_0x13c850;}else{const _0x1c7222=await this['provider']['getTransactionCount'](this['wallet'][_0xbe7dea(0x173,'OhZ8')],'latest'),_0x8aec94=await this['provider']['getTransactionCount'](this[_0xbe7dea(0x13f,'sD*9')][_0xbe7dea(0x138,'(b5u')],'pending'),_0x110e2d=_0x3cd8ec[_0xbe7dea(0x159,'&2a@')](_0x8aec94,_0x1c7222)?_0x8aec94:_0x1c7222;return _0x110e2d;}}catch(_0x53f9ca){throw _0x53f9ca;}}async['estimateGasWithRetry'](_0x2d79fa,_0x17be63,_0x42a5a5,_0x37b270=![],_0x4cc7f0=0x3,_0x1efcc3=0xbb8){const _0x53baa3=a3_0x59e503,_0x400956={'lgScF':'xQnBg','HxXbF':_0x53baa3(0x14b,'[a@l'),'iepga':function(_0x16f2eb,_0x55e68d){return _0x16f2eb+_0x55e68d;},'UeVUK':function(_0x198957,_0x13912c){return _0x198957===_0x13912c;},'NhoKc':function(_0x46d450,_0x31e449){return _0x46d450-_0x31e449;},'XqoQb':function(_0x15c595,_0x427578){return _0x15c595!==_0x427578;},'qgGlh':function(_0x1f005a,_0x45012e){return _0x1f005a(_0x45012e);}};for(let _0x13e050=0x0;_0x13e050<_0x4cc7f0;_0x13e050++){if('tpZTD'==='WZsix')throw _0x13ed8e;else try{a3_0x5b66ae['info'](_0x53baa3(0x168,'9OKg')+_0x42a5a5+'\x20TX');const _0x111c4f=await this['provider']['estimateGas']({'from':this['wallet']['address'],'to':_0x2d79fa,'value':_0x17be63,'data':_0x42a5a5});return _0x111c4f;}catch(_0x1344f0){if(_0x400956['lgScF']!==_0x400956['HxXbF']){if(_0x37b270)throw _0x1344f0;else{await Helper[_0x53baa3(0x150,'$[RG')](_0x1efcc3,this['acc'],_0x1344f0[_0x53baa3(0x148,'9OKg')]+'...\x20Attempt\x20'+_0x400956[_0x53baa3(0x13b,'73zd')](_0x13e050,0x1)+'\x20of\x20'+_0x4cc7f0,this['core']);if(_0x400956['UeVUK'](_0x13e050,_0x400956[_0x53baa3(0x13d,'QW38')](_0x4cc7f0,0x1))){if(_0x400956['XqoQb']('srrIQ','srrIQ'))throw _0x4caf19(_0x53baa3(0x15f,'KDRQ')+_0x47a3d5+'\x20attempts.');else throw _0x400956['qgGlh'](Error,'Failed\x20to\x20estimate\x20gas\x20after\x20'+_0x4cc7f0+'\x20attempts.');}}}else this['core']=_0x52c2e8,this['acc']=_0xe9494a,this['provider']=new _0x1fcb74[(_0x53baa3(0x134,'2Yih'))](_0x26d1ef['RPCURL'],_0x2aad38['CHAINID']);}}}async['buildTxBody'](_0x541afc,_0x38e581=![],_0x3f2db3=0x0){const _0x6201bd=a3_0x59e503,_0x140181=await this['getOptimalNonce'](),_0x3b89c1=await this['estimateGasWithRetry'](_0x541afc['to'],_0x3f2db3,_0x541afc[_0x6201bd(0x16d,'1fLf')],_0x38e581),_0x361e45={'to':_0x541afc['to'],'from':this['address'],'value':_0x3f2db3,'gasLimit':_0x3b89c1,'gasPrice':ethers['parseUnits'](_0x6201bd(0x13a,'OjV8'),'gwei'),'nonce':_0x140181,'data':_0x541afc['data']};return _0x361e45;}}